<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignments - DSA Progress Hub</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/AssignmentPage.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM11 7H13V13H11V7ZM11 15H13V17H11V15Z" fill="#6B7280"/>
            </svg>
            <span>DSA Progress Hub</span>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li class="active">
                    <a href="#">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" fill="#F9A8A8"/>
                        </svg>
                        Assignments
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header>
            <h1>Assignments</h1>
            <div class="header-actions">
                <div class="tabs">
                    <a href="/dashboard" class="btn btn-secondary">
                        Back
                    </a>
                    <button class="tab active">Active</button>
                    <button class="tab">Archive</button>
                </div>
                <button class="btn btn-primary">Create Assignment</button>
            </div>
        </header>

        <!-- Assignments Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Due Date</th>
                        <th>Completion Rate</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Binary Search Trees</td>
                        <td>Mar 15, 2025</td>
                        <td><div class="progress-bar"><span style="width: 60%;"></span></div></td>
                        <td><span class="status active">Active</span></td>
                        <td>
                            <div class="action-dropdown">
                                <span class="actions" onclick="toggleDropdown(this)">⋮</span>
                                <div class="dropdown-content" id="dropdown-1">
                                    <form class="update-deadline" onsubmit="updateDeadline(event, this, 'Mar 15, 2025')">
                                        <input type="date" name="new-deadline" required>
                                        <button type="submit">Update</button>
                                    </form>
                                    <a href="#" onclick="viewDetails('Binary Search Trees')">View Details</a>
                                    <a href="#" onclick="archiveAssignment('Binary Search Trees')">Archive</a>
                                    <a href="#" onclick="deleteAssignment('Binary Search Trees')">Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Graph Algorithms</td>
                        <td>Mar 20, 2025</td>
                        <td><div class="progress-bar"><span style="width: 30%;"></span></div></td>
                        <td><span class="status active">Active</span></td>
                        <td>
                            <div class="action-dropdown">
                                <span class="actions" onclick="toggleDropdown(this)">⋮</span>
                                <div class="dropdown-content" id="dropdown-2">
                                    <form class="update-deadline" onsubmit="updateDeadline(event, this, 'Mar 20, 2025')">
                                        <input type="date" name="new-deadline" required>
                                        <button type="submit">Update</button>
                                    </form>
                                    <a href="#" onclick="viewDetails('Graph Algorithms')">View Details</a>
                                    <a href="#" onclick="archiveAssignment('Graph Algorithms')">Archive</a>
                                    <a href="#" onclick="deleteAssignment('Graph Algorithms')">Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Dynamic Programming</td>
                        <td>Mar 25, 2025</td>
                        <td><div class="progress-bar"><span style="width: 10%;"></span></div></td>
                        <td><span class="status due-soon">Due Soon</span></td>
                        <td>
                            <div class="action-dropdown">
                                <span class="actions" onclick="toggleDropdown(this)">⋮</span>
                                <div class="dropdown-content" id="dropdown-3">
                                    <form class="update-deadline" onsubmit="updateDeadline(event, this, 'Mar 25, 2025')">
                                        <input type="date" name="new-deadline" required>
                                        <button type="submit">Update</button>
                                    </form>
                                    <a href="#" onclick="viewDetails('Dynamic Programming')">View Details</a>
                                    <a href="#" onclick="archiveAssignment('Dynamic Programming')">Archive</a>
                                    <a href="#" onclick="deleteAssignment('Dynamic Programming')">Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <!-- JavaScript for dropdown and actions -->
    <script>
        function toggleDropdown(element) {
            const dropdown = element.nextElementSibling;
            const isOpen = dropdown.style.display === 'block';
            // Close all other dropdowns
            document.querySelectorAll('.dropdown-content').forEach(d => d.style.display = 'none');
            dropdown.style.display = isOpen ? 'none' : 'block';
        }

        function updateDeadline(event, form, currentDate) {
            event.preventDefault();
            const newDate = form.querySelector('input[name="new-deadline"]').value;
            if (newDate) {
                alert(`Deadline updated from ${currentDate} to ${newDate}`);
                // Here you would typically send a request to your backend to update the deadline
                form.querySelector('input[name="new-deadline"]').value = '';
                toggleDropdown(form.closest('.action-dropdown').querySelector('.actions'));
            }
        }

        function viewDetails(assignmentName) {
            alert(`Viewing details for ${assignmentName}`);
            // Replace with navigation to a details page, e.g., window.location.href = `/assignment/${assignmentName}`;
            toggleDropdown(event.target.closest('.action-dropdown').querySelector('.actions'));
        }

        function archiveAssignment(assignmentName) {
            if (confirm(`Are you sure you want to archive ${assignmentName}?`)) {
                alert(`${assignmentName} has been archived`);
                // Here you would send a request to your backend to archive the assignment
                toggleDropdown(event.target.closest('.action-dropdown').querySelector('.actions'));
            }
        }

        function deleteAssignment(assignmentName) {
            if (confirm(`Are you sure you want to delete ${assignmentName}? This action cannot be undone.`)) {
                alert(`${assignmentName} has been deleted`);
                // Here you would send a request to your backend to delete the assignment
                toggleDropdown(event.target.closest('.action-dropdown').querySelector('.actions'));
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdowns = document.querySelectorAll('.dropdown-content');
            dropdowns.forEach(dropdown => {
                if (!dropdown.contains(event.target) && !event.target.classList.contains('actions')) {
                    dropdown.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>